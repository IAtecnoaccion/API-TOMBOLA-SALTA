<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>API Tómbola Salta</title>
</head>
<body>
  <div id="redoc-container"></div>
  <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
  <script>
    const spec = {
      "openapi": "3.0.0",
      "info": {
        "title": "API de Resultados de Tómbola (Quiniela Salta)",
        "version": "1.1.0",
        "description": "Esta especificación OpenAPI describe el endpoint para obtener los extractos de la Tómbola Salteña incluyendo los sorteos EXTRA, NOCTURNO, MATUTINO, VESPERTINO y NOCTURNO EXTRA (Salta La Revancha) en las diferentes regiones donde se sortea de SALTA, NACIONAL (CIUDAD DE BUENOS AIRES), JUJUY Y BSAS (PROVINCIA DE BUENOS AIRES)."
      },
      "servers": [
        {
          "url": "https://www.loteriadesalta.com/loteria-ws/api"
        }
      ],
      "paths": {
        "/extracto/TOMBOLA/ultimo/salta": {
          "get": {
            "summary": "Último extracto de Tómbola en Salta",
            "description": "Obtiene los 20 números sorteados para cada tipo de sorteo y región.\nParámetro de consulta ` _ ` (timestamp en ms) para evitar caché.",
            "parameters": [
              {
                "name": "_",
                "in": "query",
                "description": "Timestamp Unix en milisegundos para evitar caché",
                "required": false,
                "schema": {
                  "type": "integer",
                  "format": "int64",
                  "example": 1745328095450
                }
              }
            ],
            "responses": {
              "200": {
                "description": "Respuesta exitosa con JSON de resultados",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ApiResponse"
                    }
                  }
                }
              },
              "400": {
                "description": "Solicitud mal formada (Bad Request)"
              },
              "500": {
                "description": "Error interno del servidor"
              }
            }
          }
        }
      },
      "components": {
        "schemas": {
          "ApiResponse": {
            "type": "object",
            "properties": {
              "jugadaDiaria": {
                "$ref": "#/components/schemas/JugadaDiaria"
              },
              "today": {
                "type": "integer",
                "format": "int64"
              },
              "resultados": {
                "$ref": "#/components/schemas/Resultados"
              },
              "ultimosJuegos": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/UltimoJuego"
                }
              }
            },
            "required": ["jugadaDiaria", "today", "resultados", "ultimosJuegos"]
          },
          "JugadaDiaria": {
            "type": "object",
            "properties": {
              "juego": {
                "type": "string",
                "example": "TOMBOLA"
              },
              "fecha": {
                "type": "integer",
                "format": "int64"
              },
              "instalacion": {
                "type": "string",
                "example": "salta"
              }
            },
            "required": ["juego", "fecha", "instalacion"]
          },
          "Resultados": {
            "type": "object",
            "properties": {
              "EXTRA": {
                "$ref": "#/components/schemas/SorteoRegionMap"
              },
              "NOCTURNO": {
                "$ref": "#/components/schemas/SorteoRegionMap"
              },
              "MATUTINO": {
                "$ref": "#/components/schemas/SorteoRegionMap"
              },
              "VESPERTINO": {
                "$ref": "#/components/schemas/SorteoRegionMap"
              },
              "NOCTURNO EXTRA": {
                "$ref": "#/components/schemas/SorteoRegionMap"
              }
            },
            "required": ["EXTRA", "NOCTURNO", "MATUTINO", "VESPERTINO"]
          },
          "SorteoRegionMap": {
            "type": "object",
            "properties": {
              "JUJUY": {
                "$ref": "#/components/schemas/SorteoInfo"
              },
              "NACIONAL": {
                "$ref": "#/components/schemas/SorteoInfo"
              },
              "SALTA": {
                "$ref": "#/components/schemas/SorteoInfo"
              },
              "BSAS": {
                "$ref": "#/components/schemas/SorteoInfo"
              }
            },
            "required": ["JUJUY", "NACIONAL", "SALTA", "BSAS"]
          },
          "SorteoInfo": {
            "type": "object",
            "properties": {
              "horaSorteo": {
                "type": "string",
                "example": "12:00"
              },
              "descripcionSorteo": {
                "type": "string",
                "description": "Descripción del sorteo según región",
                "example": "Matutino Salta"
              },
              "tipoSorteo": {
                "type": "string",
                "enum": ["M", "V"],
                "description": "M = Matutino, V = Vespertino"
              },
              "atHome": {
                "type": "integer",
                "description": "1 = sorteo principal (región asignada), 0 = remoto",
                "example": 1
              },
              "extracto": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Lista de 20 números sorteados",
                "example": ["4141", "5824", "2960", "3648"]
              },
              "fechaSorteo": {
                "type": "string",
                "format": "date",
                "example": "18/07/2025"
              }
            },
            "required": ["descripcionSorteo"]
          },
          "UltimoJuego": {
            "type": "object",
            "properties": {
              "numeroSorteo": {
                "type": "string"
              },
              "fechaSorteo": {
                "type": "string",
                "example": "18/07/2025"
              },
              "fecha": {
                "type": "integer",
                "format": "int64"
              }
            },
            "required": ["numeroSorteo", "fechaSorteo", "fecha"]
          }
        }
      }
    };

    Redoc.init(spec, {}, document.getElementById('redoc-container'));
  </script>
</body>
</html>
